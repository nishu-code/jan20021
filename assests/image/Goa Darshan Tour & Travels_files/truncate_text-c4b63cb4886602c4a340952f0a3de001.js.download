!function(){function e(){VL.createIntersectionObserver($("[data-lines]"),function(e){console.log("trunk8 initialized",e,new Date);var t=$(e),i=t.data("lines");t.trunk8({lines:i}),jQuery(window).on("load resize orientationchange",function(){t.trunk8("update")})})}function t(){VL.createIntersectionObserver($(".fix-description-height"),r)}var i=function(){$(".read-more").on("click",function(e){e.preventDefault();var t=$(this).parent();t.trigger("destroy"),t.closest(".card").addClass("overlap-short-blurb");var i=t.closest(".item-blurb-container"),r=i.find(".background-overlay").height()-(i.find(".main-content .trip-name-pricing").outerHeight()+i.find(".main-content .hr").outerHeight()+parseInt(i.find(".main-content .trip-name-pricing").css("margin-top")));t.dotdotdot({ellipsis:"...",watch:!0,wrap:"letter",height:r,after:".read-less",callback:function(){n(t)}})})},n=function(e){e.find(".read-less").css({display:"inline-block"}),$(".read-less").on("click",function(e){e.preventDefault();var t=$(this).parent();t.trigger("destroy"),t.closest(".card").removeClass("overlap-short-blurb"),r(t)})},r=function(e){console.log("dotdotdot initialized",e,new Date);var t=$(e),n=parseInt($(".trip-short-blurb.fix-description-height").css("max-height"));t.removeClass("fix-description-height"),t.dotdotdot({ellipsis:"...",watch:!0,wrap:"letter",height:n,after:".read-more",callback:function(){i()}});var r=jQuery(window),o="active-state";jQuery(".trip-card-layout-5").each(function(){function e(){s.trunk8("update"),!s.find(".read-more").length&&s.find("p").height()>120&&setTimeout(function(){jQuery('<a class="read-less" href="#">'+g+"</a>").appendTo(s.find("p").last())},10)}function t(){n.addClass(o),u=parseInt(s.css("line-height"),10),h=n.outerHeight()-l.outerHeight(!0)-c.outerHeight(!0)-10,f=Math.floor(h/u),s.trunk8({lines:f}),s.trunk8("update"),a.css({marginTop:-d.outerHeight()}),s.find(".read-more").length||setTimeout(function(){jQuery('<a class="read-less" href="#">'+g+"</a>").appendTo(s.find("p").last())},10)}function i(){s.find(".read-less").remove(),n.removeClass(o),u=parseInt(s.css("line-height"),10),h=n.outerHeight()-d.outerHeight(!0)-l.outerHeight(!0)-c.outerHeight(!0)-10,f=Math.floor(h/u),s.trunk8({lines:f}),a.removeAttr("style"),s.trunk8("update")}var n=jQuery(this),a=n.find(".box"),s=n.find(".text-block"),l=n.find(".hold"),c=n.find(".btn"),d=n.find(".img-block"),u=0,h=0,f=0,p=VL.i18n_t("common.store_front.themes.flexi_theme.partials.trip_card_layout_v5.read_more"),g=VL.i18n_t("common.store_front.themes.flexi_theme.partials.trip_card_layout_v5.read_less");s.find(".fix-description-height").removeClass("fix-description-height"),s.trunk8({lines:2,fill:'&hellip; <a class="read-more" href="#">'+p+"</a>"}),n.on("click",".read-more, .read-less",function(e){e.preventDefault(),n.hasClass(o)?(i(),s.trunk8({fill:'&hellip; <a class="read-more" href="#">'+p+"</a>"})):(t(),s.trunk8({fill:'&hellip; <a class="read-less" href="#">'+g+"</a>"}))}),setTimeout(function(){i()},500),e(),r.on("resize load orientationchange",e)}),jQuery(".trip-card-layout-4 .img-block").each(function(){function e(){n.trunk8("update")}var t=jQuery(this),i=t.find(".box-text"),n=t.find(".box-text p"),r=t.find(".box-heading"),o=jQuery(".trip-card-layout-4 .img-block .box-text"),a=0,s=0,l=0;n.trunk8({lines:2}),t.on("click mouseenter",function(){o.hide(),i.show(),a=parseInt(n.css("line-height"),10),s=t.outerHeight()-r.outerHeight(!0),l=Math.floor(s/a)-2,n.trunk8({lines:l}),n.trunk8("update")}).on("mouseleave",function(){i.hide()}),jQuery(window).on("resize orientationchange",e)})};VL.init_on_ready("initDotDotDot",t),VL.init_on_ready("initTrunk8",e)}();